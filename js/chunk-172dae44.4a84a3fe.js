(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-172dae44"],{"0d5f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cityWrap"},[i("header",[i("router-link",{attrs:{to:"/home"}},[i("i",{staticClass:"el-icon-arrow-left"})]),i("div",[t._v(t._s(t.cityInfo?t.cityInfo.name:""))]),i("router-link",{attrs:{to:"/home"}},[t._v("切换城市")])],1),i("div",{staticClass:"form"},[i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputV,expression:"inputV"}],attrs:{type:"text",placeholder:"输入学校、商务楼、地址"},domProps:{value:t.inputV},on:{input:function(e){e.target.composing||(t.inputV=e.target.value)}}})]),i("div",[i("div",{staticClass:"searchBtn",on:{click:t.searchPlace}},[t._v("提交")])])]),t.isShowHistoryHeader?i("div",{staticClass:"history"},[t._v("搜索历史")]):t._e(),i("ul",t._l(t.placeArr,(function(e){return i("li",{key:e.geohash,on:{click:function(i){return t.choosePlace(e)}}},[i("h4",{staticClass:"ellipsis p_name"},[t._v(t._s(e.name))]),i("p",{staticClass:"ellipsis p_address"},[t._v(t._s(e.address))])])})),0),t.isShowClearBtn?i("div",{staticClass:"clearHistory",on:{click:t.clearAllPlace}},[t._v("清空所有")]):t._e()])},s=[],o={name:"City",data:function(){return{cityId:0,cityInfo:null,inputV:"",placeArr:[],isShowHistoryHeader:!0,isShowClearBtn:!1}},created:function(){var t=this;this.cityId=this.$route.params.cityId,this.axios.get("/v1/cities/"+this.cityId).then((function(e){t.cityInfo=e})).catch((function(t){})),localStorage.getItem("placeHistory")&&(this.placeArr=JSON.parse(localStorage.getItem("placeHistory")),this.isShowClearBtn=!0)},methods:{searchPlace:function(){var t=this;this.axios.get("/v1/pois",{params:{city_id:this.cityInfo.id,keyword:this.inputV,type:"search"}}).then((function(e){console.log(e),t.placeArr=e,t.isShowHistoryHeader=!1})).catch((function(t){console.log(t)}))},choosePlace:function(t){if(localStorage.getItem("placeHistory")){var e=JSON.parse(localStorage.getItem("placeHistory"));e.push(t),localStorage.setItem("placeHistory",JSON.stringify(e))}else{var i=[];i.push(t),localStorage.setItem("placeHistory",JSON.stringify(i))}this.$router.push("/food"),localStorage.setItem("msite",JSON.stringify(t))},clearAllPlace:function(){localStorage.removeItem("placeHistory"),this.placeArr=[],this.isShowClearBtn=!1}}},c=o,r=(i("569b"),i("2877")),l=Object(r["a"])(c,a,s,!1,null,"1b75d103",null);e["default"]=l.exports},"569b":function(t,e,i){"use strict";var a=i("c7a1"),s=i.n(a);s.a},c7a1:function(t,e,i){}}]);
//# sourceMappingURL=chunk-172dae44.4a84a3fe.js.map